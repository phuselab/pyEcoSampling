<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PyEcosampling API Usage Demo &mdash; Eco Sampling 1.0.0 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Configuration file" href="config.html" />
    <link rel="prev" title="Ecological Sampling Python" href="introduction.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html">
            <img src="../_static/logo.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Ecological Sampling Python</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">PyEcosampling API Usage Demo</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Running-Whole-Experiment">Running Whole Experiment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Imports">Imports</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#A.-Sampling-the-Natural-Habitat">A. Sampling the Natural Habitat</a></li>
<li class="toctree-l2"><a class="reference internal" href="#A.0-Read-Frame">A.0 Read Frame</a></li>
<li class="toctree-l2"><a class="reference internal" href="#A.1-Makes-a-Foveated-Frame">A.1 Makes a Foveated Frame</a></li>
<li class="toctree-l2"><a class="reference internal" href="#A.2-Compute-Features-of-the-Physical-Landscape">A.2 Compute Features of the Physical Landscape</a></li>
<li class="toctree-l2"><a class="reference internal" href="#A.3-Sample-fovated-Salience-Map">A.3 Sample fovated Salience Map</a></li>
<li class="toctree-l2"><a class="reference internal" href="#A.4-Sample-Proto-Objects">A.4 Sample Proto-Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="#A.5-Sampling-Interest-Points-/-Preys">A.5 Sampling Interest Points / Preys</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#B-Sampling-The-Appropriate-Ocolumotor-Action">B Sampling The Appropriate Ocolumotor Action</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#B.1-Evaluating-Complexity-of-the-Scene">B.1 Evaluating Complexity of the Scene</a></li>
<li class="toctree-l2"><a class="reference internal" href="#B.1.2-Evaluate-Complexity-C(t)">B.1.2 Evaluate Complexity C(t)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#B.2.-Action-Selection-via-Landscape-Complexity">B.2. Action Selection via Landscape Complexity</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#C-Sampling-The-Gaze-Shift">C Sampling The Gaze Shift</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#IPs-complete-visualization">IPs complete visualization</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="config.html">Configuration file</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">EcoSampling Modules</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ecosampling/generate_scanpath.html">Generate Scanpath</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ecosampling/frame_processor.html">Frame Processor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ecosampling/salience_map.html">Salience Map</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ecosampling/feature_map.html">Feature Map</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ecosampling/proto_parameters.html">Proto Parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ecosampling/interest_points.html">Interest Points</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ecosampling/complexity.html">Complexity</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ecosampling/action_selector.html">Action Selector</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ecosampling/gaze_sampler.html">Gaze Sampler</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Salience Backends</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ecosampling/self_resemblance.html">Self-Resemblance</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Utils</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../utils/statistics.html">Statistics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utils/helper.html">Helpers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utils/logger.html">Logger</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utils/plotter.html">Plotter</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Eco Sampling</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>PyEcosampling API Usage Demo</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/user/api_usage.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt .copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
.jp-RenderedHTMLCommon table,
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
.jp-RenderedHTMLCommon thead,
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
.jp-RenderedHTMLCommon tr,
.jp-RenderedHTMLCommon th,
.jp-RenderedHTMLCommon td,
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
.jp-RenderedHTMLCommon th,
div.rendered_html th {
  font-weight: bold;
}
.jp-RenderedHTMLCommon tbody tr:nth-child(odd),
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
.jp-RenderedHTMLCommon tbody tr:hover,
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="PyEcosampling-API-Usage-Demo">
<h1>PyEcosampling API Usage Demo<a class="headerlink" href="#PyEcosampling-API-Usage-Demo" title="Permalink to this headline"></a></h1>
<p>This notebook is a simple one frame iteration to the process of gaze sampling. Its main purpose is not to run a valid experiment, just demonstrate the functioning of the code.</p>
<section id="Running-Whole-Experiment">
<h2>Running Whole Experiment<a class="headerlink" href="#Running-Whole-Experiment" title="Permalink to this headline"></a></h2>
<p>If you want to run the whole experiment execute the following bash command in the root directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ python ecosampling
</pre></div>
</div>
<section id="Imports">
<h3>Imports<a class="headerlink" href="#Imports" title="Permalink to this headline"></a></h3>
<p>The first cell bellow is setting the work directory, please dont change.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[31]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;notebook&#39;</span><span class="p">:</span>
    <span class="n">root_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">curdir</span><span class="p">))</span>
    <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">root_dir</span> <span class="o">+</span> <span class="s1">&#39;/ecosampling/&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Current Working Directory: </span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Current Working Directory: /Users/renatonobre/Desktop/Projects/AC_NI/INMCA_Nobre/ecosampling
</pre></div></div>
</div>
<p>Import libraries from ecosampling</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="kn">from</span> <span class="nn">action_selector</span> <span class="kn">import</span> <span class="n">ActionSelector</span>
<span class="kn">from</span> <span class="nn">complexity</span> <span class="kn">import</span> <span class="n">Complexity</span>
<span class="kn">from</span> <span class="nn">config</span> <span class="kn">import</span> <span class="n">GeneralConfig</span><span class="p">,</span> <span class="n">ProtoConfig</span><span class="p">,</span> <span class="n">SaliencyConfig</span><span class="p">,</span> <span class="n">ProtoConfig</span><span class="p">,</span> <span class="n">IPConfig</span><span class="p">,</span> <span class="n">ComplexityConfig</span><span class="p">,</span> <span class="n">GazeConfig</span>
<span class="kn">from</span> <span class="nn">feature_map</span> <span class="kn">import</span> <span class="n">FeatureMap</span>
<span class="kn">from</span> <span class="nn">frame_processor</span> <span class="kn">import</span> <span class="n">FrameProcessor</span>
<span class="kn">from</span> <span class="nn">gaze_sampler</span> <span class="kn">import</span> <span class="n">GazeSampler</span>
<span class="kn">from</span> <span class="nn">interest_points</span> <span class="kn">import</span> <span class="n">IPSampler</span>
<span class="kn">from</span> <span class="nn">proto_parameters</span> <span class="kn">import</span> <span class="n">ProtoParameters</span>
<span class="kn">from</span> <span class="nn">salience_map</span> <span class="kn">import</span> <span class="n">SalienceMap</span>
<span class="kn">from</span> <span class="nn">utils.plotter</span> <span class="kn">import</span> <span class="n">Plotter</span> <span class="k">as</span> <span class="n">plotter</span>
</pre></div>
</div>
</div>
<p>Setting Up initial variables, and helper function. If this was to be a complete experiment, those variables would be update at each interaction with the system</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">print_configurations</span><span class="p">(</span><span class="n">conf_class</span><span class="p">,</span> <span class="n">conf_class_str</span><span class="p">):</span>
    <span class="n">attrs</span> <span class="o">=</span> <span class="nb">vars</span><span class="p">(</span><span class="n">conf_class</span><span class="p">)</span>
    <span class="n">attrs_keys</span> <span class="o">=</span> <span class="p">[</span><span class="n">attr</span> <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="n">attrs</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">attr</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;__&#39;</span><span class="p">)]</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">conf_class_str</span><span class="si">}</span><span class="s2"> Configurations:&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="n">attrs_keys</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\t</span><span class="si">{</span><span class="n">attr</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">attrs</span><span class="p">[</span><span class="n">attr</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">FRAME</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">center_foa</span> <span class="o">=</span> <span class="n">GazeSampler</span><span class="p">(</span><span class="n">FrameProcessor</span><span class="p">())</span><span class="o">.</span><span class="n">start_foa</span>
<span class="n">start_nu</span> <span class="o">=</span> <span class="n">GazeSampler</span><span class="p">(</span><span class="n">FrameProcessor</span><span class="p">())</span><span class="o">.</span><span class="n">start_nu</span>
<span class="n">start_dir</span> <span class="o">=</span> <span class="mi">0</span>
<br/></pre></div>
</div>
</div>
<p>Running an experiment in pyecosampling is based on the config.py file. All the important values of the experiment are set there. Following are the values for the general configuration.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">print_configurations</span><span class="p">(</span><span class="n">GeneralConfig</span><span class="p">,</span> <span class="s2">&quot;General&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
General Configurations:
        EXPERIMENT_TYPE: 3DLARK_SELFRESEMBLANCE
        OFFSET: 1
        TOTAL_OBSERVERS: 1
        FRAME_STEP: 2
        VIDEO_NAME: beverly01
        DIR_OFFSET: 310
        EXPERIMENT_DATA_FOLDER: demo/
        NN_IMG_START: 1
        NN_IMG_END: 90
        VERBOSE: False
        VISUALIZE_RESULTS: True
        SAVE_FOV_IMG: True
        SAVE_SAL_IMG: True
        SAVE_PROTO_IMG: True
        SAVE_IP_IMG: True
        SAVE_HISTO_IMG: True
        SAVE_FOA_IMG: True
        SAVE_FOA_ONFILE: True
        SAVE_COMPLEXITY_ONFILE: True
        PROJECT_ROOT: /Users/renatonobre/Desktop/Projects/AC_NI/INMCA_Nobre/ecosampling
        BASE_DIR: /Users/renatonobre/Desktop/Projects/AC_NI/INMCA_Nobre
        DATA_DIR: /Users/renatonobre/Desktop/Projects/AC_NI/INMCA_Nobre/data/
        FRAME_DIR: /Users/renatonobre/Desktop/Projects/AC_NI/INMCA_Nobre/data/demo/
        RESULTS_DIR: /Users/renatonobre/Desktop/Projects/AC_NI/INMCA_Nobre/results/beverly01/
        GENERATE_GIF: True
</pre></div></div>
</div>
</section>
</section>
<section id="A.-Sampling-the-Natural-Habitat">
<h2>A. Sampling the Natural Habitat<a class="headerlink" href="#A.-Sampling-the-Natural-Habitat" title="Permalink to this headline"></a></h2>
</section>
<section id="A.0-Read-Frame">
<h2>A.0 Read Frame<a class="headerlink" href="#A.0-Read-Frame" title="Permalink to this headline"></a></h2>
<p>Starting from the process of gaze sampling, there is the FrameProcessor class. Its main purpose is to provide functions for both opening and transforming the image frames. Specially, the FrameProcessor class has functions to create the windows size frames from images in the local directory, apply a foveated filtering to a frame, and reduce and resize a given frame. The way in which the PyEcosampling is designed, not only the current frames is read, but also the previous and the future frame,
creating a 3 time-step frame. Additionally, this images are converted to gray-scale for the rest of the experiment.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[32]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">frame_sampling</span> <span class="o">=</span> <span class="n">FrameProcessor</span><span class="p">()</span>
<span class="n">I</span> <span class="o">=</span> <span class="n">frame_sampling</span><span class="o">.</span><span class="n">read_frames</span><span class="p">(</span><span class="n">FRAME</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Frame Shape = </span><span class="si">{</span><span class="n">I</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">plotter</span><span class="o">.</span><span class="n">plot_original_frame</span><span class="p">(</span><span class="n">axs</span><span class="p">,</span> <span class="n">frame_sampling</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Frame Shape = (480, 640, 3)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/user_api_usage_11_1.png" src="../_images/user_api_usage_11_1.png" />
</div>
</div>
</section>
<section id="A.1-Makes-a-Foveated-Frame">
<h2>A.1 Makes a Foveated Frame<a class="headerlink" href="#A.1-Makes-a-Foveated-Frame" title="Permalink to this headline"></a></h2>
<p>Once the 3 time-step is created, the next step to perform is to apply a digital image processing technique denominated foveated imaging. The foveated imaging apply a Gaussian filter in the previous focus of attention, thus focusing the amount of detail in the current gaze location, and reducing the resolution of surrounding areas.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[33]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">foveated_I</span> <span class="o">=</span> <span class="n">frame_sampling</span><span class="o">.</span><span class="n">foveated_imaging</span><span class="p">(</span><span class="n">center_foa</span><span class="p">,</span> <span class="n">I</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Foveated Frame Shape = </span><span class="si">{</span><span class="n">foveated_I</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">plotter</span><span class="o">.</span><span class="n">plot_foveated_frame</span><span class="p">(</span><span class="n">axs</span><span class="p">,</span> <span class="n">frame_sampling</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Foveated Frame Shape = (480, 640, 3)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/user_api_usage_13_1.png" src="../_images/user_api_usage_13_1.png" />
</div>
</div>
<p>Additionally, the FrameProcessor class has also functions to reduce the frame to a desired size and resize it back to the original dimension. Those functions are extremely helpful in the creation of the feature map, in which, for computation purposes, required a reduced size image, while for visualization require to re-scale back to the original format.</p>
</section>
<section id="A.2-Compute-Features-of-the-Physical-Landscape">
<h2>A.2 Compute Features of the Physical Landscape<a class="headerlink" href="#A.2-Compute-Features-of-the-Physical-Landscape" title="Permalink to this headline"></a></h2>
<p>After we have the foveated frame computed the next steps is to create a feature map, and use the feature map to create a salience map with the features found. In order to generate the salience, first PyEcosampling relies on its FeatureMap class to generate the features. This class is designed to be a wrapper to call backend feature computing methods and should be extended if future methods are to be implemented. In the PyEcosampling version created, the FeatureMap class calls Seo’s 3D-LARK
description features, to reproduce the static and space-time visual saliency by self-resemblance.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">print_configurations</span><span class="p">(</span><span class="n">SaliencyConfig</span><span class="p">,</span> <span class="s2">&quot;Saliency&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Saliency Configurations:
        WSIZE: 3
        WSIZE_T: 3
        LARK_ALPHA: 0.42
        LARK_H: 1
        LARK_SIGMA: 0.7
        S_LEVELS: 4
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[34]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">reduced_frames</span> <span class="o">=</span> <span class="n">frame_sampling</span><span class="o">.</span><span class="n">reduce_frames</span><span class="p">(</span><span class="n">foveated_I</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Reduced Frame Shape = </span><span class="si">{</span><span class="n">reduced_frames</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">feature_map</span> <span class="o">=</span> <span class="n">FeatureMap</span><span class="p">()</span>
<span class="n">foveated_feature_map</span> <span class="o">=</span> <span class="n">feature_map</span><span class="o">.</span><span class="n">compute_features</span><span class="p">(</span><span class="n">reduced_frames</span><span class="p">,</span> <span class="n">frame_sampling</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">plotter</span><span class="o">.</span><span class="n">plot_feature_map</span><span class="p">(</span><span class="n">axs</span><span class="p">,</span> <span class="n">feature_map</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Reduced Frame Shape = (64, 64, 3)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/user_api_usage_17_1.png" src="../_images/user_api_usage_17_1.png" />
</div>
</div>
</section>
<section id="A.3-Sample-fovated-Salience-Map">
<h2>A.3 Sample fovated Salience Map<a class="headerlink" href="#A.3-Sample-fovated-Salience-Map" title="Permalink to this headline"></a></h2>
<p>After the LARK feature map calculation the Self-Resemblance backend is ready to create the salience map, and it does so through the template class SalienceMap. In SalienceMap, just as in FeatureMap, the methodology backend to create the map is called and should be extended for future methods.</p>
<p>In our approach the foveated 3D LARK feature map is used to create the Seo’s et al. static and space-time self-resemblance salience. Overall, their method had state of the art performance on commonly used human eye fixation data, thus it was a good choice for the Ecosampling implementation and it was worth translating their work to PyEcosampling.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[35]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">saliency_generator</span> <span class="o">=</span> <span class="n">SalienceMap</span><span class="p">()</span>
<span class="n">saliency_map</span> <span class="o">=</span> <span class="n">saliency_generator</span><span class="o">.</span><span class="n">compute_salience</span><span class="p">(</span><span class="n">foveated_feature_map</span><span class="p">,</span> <span class="n">frame_sampling</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Salience Map Shape = </span><span class="si">{</span><span class="n">saliency_map</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">plotter</span><span class="o">.</span><span class="n">plot_saliency_map</span><span class="p">(</span><span class="n">axs</span><span class="p">,</span> <span class="n">saliency_map</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Salience Map Shape = (480, 640)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/user_api_usage_19_1.png" src="../_images/user_api_usage_19_1.png" />
</div>
</div>
</section>
<section id="A.4-Sample-Proto-Objects">
<h2>A.4 Sample Proto-Objects<a class="headerlink" href="#A.4-Sample-Proto-Objects" title="Permalink to this headline"></a></h2>
<p>After the salience map is generated, we can look for proto-objects in the map.</p>
<p>The ProtoParameter class is responsible for creating a proto-object map and extracting proto-parameters. In a first step the class generates the raw patch map by threshold the normalized salience map so as to achieve 95% significance level for deciding whether the given saliency values are in the extreme tails. After that only a subset of best patches ranked through their size are selected. With those selected patches, ProtoParameters class is able to sample the proto-objects by computing the
patch boundaries and fitting ellipses in the region. The technique used in the Ecosampling and hence this python version derives from Halir et al. numerically stable direct leat square fitting of ellipses.</p>
<p>It is worth mentioning that the proto-parameters step of the gaze sampling is not mandatory. If the user desires to not execute it, the user can opt to skip it and only sample interest points from landscape.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">print_configurations</span><span class="p">(</span><span class="n">ProtoConfig</span><span class="p">,</span> <span class="s2">&quot;Proto-Objects&quot;</span><span class="p">)</span>
<br/></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Proto-Objects Configurations:
        PROTO: True
        N_BEST_PROTO: 15
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[36]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">proto_params</span> <span class="o">=</span> <span class="n">ProtoParameters</span><span class="p">()</span>
<span class="n">num_proto</span> <span class="o">=</span> <span class="n">proto_params</span><span class="o">.</span><span class="n">sample_proto_objects</span><span class="p">(</span><span class="n">saliency_map</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Proto-objects Found: </span><span class="si">{</span><span class="n">num_proto</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">plotter</span><span class="o">.</span><span class="n">plot_proto_objects</span><span class="p">(</span><span class="n">axs</span><span class="p">,</span> <span class="n">frame_sampling</span><span class="p">,</span> <span class="n">proto_params</span><span class="p">,</span> <span class="n">num_proto</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Proto-objects Found: 15
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/user_api_usage_22_1.png" src="../_images/user_api_usage_22_1.png" />
</div>
</div>
</section>
<section id="A.5-Sampling-Interest-Points-/-Preys">
<h2>A.5 Sampling Interest Points / Preys<a class="headerlink" href="#A.5-Sampling-Interest-Points-/-Preys" title="Permalink to this headline"></a></h2>
<p>Now that we have proto-objects, the system can sample interest points. In PyEcosampling the IPSampler class is responsible for sampling those points. Overall, the class control the sampling of interest points. If there is no proto-objects, it will sample only from the landscape. If there are proto-objects, the user can choose to sample from both or just one.</p>
<p>Sampling points from the proto-objects corresponds to draw sample from a multivariate distribution, which will eventually, generate clusters of interest points, one cluster for each patch. On the other hand, sampling points from the landscape involves in sampling IPs directly from points weighted according to their salience, and for each sample set a scale by drawing from uniform distribution oven a given configuration scale. Thus being able to generate IPs both from the proto-objects and
directly from the salience map.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">sample_ips</span><span class="p">(</span><span class="n">sample_landscape</span><span class="p">):</span>
    <span class="n">IPConfig</span><span class="o">.</span><span class="n">WITH_PERTURBATION</span> <span class="o">=</span> <span class="n">sample_landscape</span>
    <span class="k">if</span> <span class="n">sample_landscape</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Results with Landscape Sampling and Proto-objects</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Results only with Proto-objects</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">ip_sampler</span> <span class="o">=</span> <span class="n">IPSampler</span><span class="p">()</span>
    <span class="n">sampled_points_coord</span> <span class="o">=</span> <span class="n">ip_sampler</span><span class="o">.</span><span class="n">interest_point_sample</span><span class="p">(</span><span class="n">num_proto</span><span class="p">,</span> <span class="n">proto_params</span><span class="p">,</span> <span class="n">saliency_map</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;X-Axis Sampled Points Shape: </span><span class="si">{</span><span class="n">sampled_points_coord</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Y-Axis Sampled Points Shape: </span><span class="si">{</span><span class="n">sampled_points_coord</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Single Point Coords: </span><span class="si">{</span><span class="n">sampled_points_coord</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">sampled_points_coord</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ip_sampler</span><span class="p">,</span> <span class="n">sampled_points_coord</span>

<span class="n">print_configurations</span><span class="p">(</span><span class="n">IPConfig</span><span class="p">,</span> <span class="s2">&quot;Interest Points&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Interest Points Configurations:
        TYPE: SelfResemblance
        SCALE: [10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30]
        MAX_POINTS: 80
        WEIGHTED_SAMPLING: True
        WEIGHTED_SCALE: 0
        N_POINTS: 0
        WINDOW_SIZE: 7
        WITH_PERTURBATION: True
        X_BIN_SIZE: 20
        Y_BIN_SIZE: 20
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">_</span><span class="p">,</span> <span class="n">sampled_points_coord</span> <span class="o">=</span> <span class="n">sample_ips</span><span class="p">(</span><span class="n">sample_landscape</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">plotter</span><span class="o">.</span><span class="n">plot_interest_points</span><span class="p">(</span><span class="n">axs</span><span class="p">,</span> <span class="n">frame_sampling</span><span class="p">,</span> <span class="n">sampled_points_coord</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Results only with Proto-objects

X-Axis Sampled Points Shape: (239,)
Y-Axis Sampled Points Shape: (239,)
Single Point Coords: 540.330815019357, 525.7909481227701
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/user_api_usage_26_1.png" src="../_images/user_api_usage_26_1.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ip_sampler</span><span class="p">,</span> <span class="n">sampled_points_coord</span> <span class="o">=</span> <span class="n">sample_ips</span><span class="p">(</span><span class="n">sample_landscape</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">plotter</span><span class="o">.</span><span class="n">plot_interest_points</span><span class="p">(</span><span class="n">axs</span><span class="p">,</span> <span class="n">frame_sampling</span><span class="p">,</span> <span class="n">sampled_points_coord</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Results with Landscape Sampling and Proto-objects

X-Axis Sampled Points Shape: (319,)
Y-Axis Sampled Points Shape: (319,)
Single Point Coords: 513.5610969986157, 525.3384196659395
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/user_api_usage_28_1.png" src="../_images/user_api_usage_28_1.png" />
</div>
</div>
<section id="B-Sampling-The-Appropriate-Ocolumotor-Action">
<h3>B Sampling The Appropriate Ocolumotor Action<a class="headerlink" href="#B-Sampling-The-Appropriate-Ocolumotor-Action" title="Permalink to this headline"></a></h3>
</section>
</section>
<section id="B.1-Evaluating-Complexity-of-the-Scene">
<h2>B.1 Evaluating Complexity of the Scene<a class="headerlink" href="#B.1-Evaluating-Complexity-of-the-Scene" title="Permalink to this headline"></a></h2>
<p>Once all the interest points are set, we are able to represent the IPS as a histogram of the spatio-temporal configuration of the landscape. Ecosampling, base this idea on the landscape entropy determined by dispersion or concentration of food items or preys. Therefore, generalizing this approach, Ecosampling is able to capture the time-varying configurational complexity of interest points within the landscape.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">hist_mat</span><span class="p">,</span> <span class="n">n_samples</span><span class="p">,</span> <span class="n">n_bins</span> <span class="o">=</span> <span class="n">ip_sampler</span><span class="o">.</span><span class="n">histogram_ips</span><span class="p">(</span><span class="n">frame_sampling</span><span class="p">,</span> <span class="n">sampled_points_coord</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Histmat Shape: </span><span class="si">{</span><span class="n">hist_mat</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Total Samples: </span><span class="si">{</span><span class="nb">int</span><span class="p">(</span><span class="n">n_samples</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Total Bins: </span><span class="si">{</span><span class="n">n_bins</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>


<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">plotter</span><span class="o">.</span><span class="n">plot_empirical_dists</span><span class="p">(</span><span class="n">axs</span><span class="p">,</span> <span class="n">ip_sampler</span><span class="o">.</span><span class="n">show_hist</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Histmat Shape: (24, 32)
Total Samples: 319
Total Bins: 768
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/user_api_usage_31_1.png" src="../_images/user_api_usage_31_1.png" />
</div>
</div>
</section>
<section id="B.1.2-Evaluate-Complexity-C(t)">
<h2>B.1.2 Evaluate Complexity C(t)<a class="headerlink" href="#B.1.2-Evaluate-Complexity-C(t)" title="Permalink to this headline"></a></h2>
<p>Considering the generated empirical distribution of proto-objects and landscape’s interest points, the next step on the process is to compute its spatial configuration complexity. The main reason for computing the spatial complexity is related to the action sampling process. Low complexity scenarios usually lead to longer flights, while at the edge of order or disorder more complex and mixed behaviors take place.</p>
<p>In the case of a time-varying visual landscape, a crowded scene with many people moving represents a disordered system (high entropy, low order) as opposed to a static scene where no events take place (low entropy, high order).</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">print_configurations</span><span class="p">(</span><span class="n">ComplexityConfig</span><span class="p">,</span> <span class="s2">&quot;Complexity&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Complexity Configurations:
        TYPE: SDL
        EPS: 0.004
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">complexity_evaluator</span> <span class="o">=</span> <span class="n">Complexity</span><span class="p">()</span>
<span class="n">order</span><span class="p">,</span> <span class="n">disorder</span><span class="p">,</span> <span class="n">complexity</span> <span class="o">=</span> <span class="n">complexity_evaluator</span><span class="o">.</span><span class="n">compute_complexity</span><span class="p">(</span><span class="n">hist_mat</span><span class="p">,</span> <span class="n">n_samples</span><span class="p">,</span> <span class="n">n_bins</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Order: </span><span class="si">{</span><span class="n">order</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Disorder: </span><span class="si">{</span><span class="n">disorder</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Complexity: </span><span class="si">{</span><span class="n">complexity</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Order: 0.39929449968957786
Disorder: 0.6007055003104221
Complexity: 0.23985840220722757
</pre></div></div>
</div>
</section>
<section id="B.2.-Action-Selection-via-Landscape-Complexity">
<h2>B.2. Action Selection via Landscape Complexity<a class="headerlink" href="#B.2.-Action-Selection-via-Landscape-Complexity" title="Permalink to this headline"></a></h2>
<p>Boccignone’s Ecosampling defines three possible events that will eventually be identified to provide the gist of the spatio-temporal habitat: ordered dynamics, edge dynamics, and disordered dynamics, each biasing the process toward a specific gaze shift behavior. The ActionSelector class is responsible for reading the order, disorder, complexity, values, update the dirichlet hyper-parameters and sample the appropriate gaze action, which corresponds to the <span class="math notranslate nohighlight">\(\alpha\)</span>, <span class="math notranslate nohighlight">\(\beta\)</span>,
<span class="math notranslate nohighlight">\(\delta\)</span> and <span class="math notranslate nohighlight">\(\gamma\)</span> values of a <span class="math notranslate nohighlight">\(\alpha\)</span>-stable distribution.</p>
<p>Summing up, the action sampling step corresponds to: i) compute the complexity of the landscape as a function of sampled interest points; ii) update accordingly the dirichlet hyper-parameters; iii) sample the gaze-shift action from a multinomial distribution using the resulting dirchlet <span class="math notranslate nohighlight">\(\pi\)</span> probability.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Starting Nu value</span>
<span class="n">nu</span> <span class="o">=</span> <span class="n">start_nu</span>
<span class="n">action_sampler</span> <span class="o">=</span> <span class="n">ActionSelector</span><span class="p">(</span><span class="n">disorder</span><span class="p">,</span> <span class="n">order</span><span class="p">,</span> <span class="n">complexity</span><span class="p">)</span>
<span class="n">nu</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="n">action_sampler</span><span class="o">.</span><span class="n">select_action</span><span class="p">(</span><span class="n">nu</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;NU Vector </span><span class="si">{</span><span class="n">nu</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Sample Action </span><span class="si">{</span><span class="n">z</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
NU Vector [1. 1. 2.]
Sample Action [0]
</pre></div></div>
</div>
<section id="C-Sampling-The-Gaze-Shift">
<h3>C Sampling The Gaze Shift<a class="headerlink" href="#C-Sampling-The-Gaze-Shift" title="Permalink to this headline"></a></h3>
<p>With the proto-objects, the IPs and their empirical distribution, and the gaze action sampled, the GazeSampler class can now calculate the final Focus of Attention. The class computes the actual gaze relocation by using a Langevin-like stochastic differential equation, whose noise source is sampled from a mixture of <span class="math notranslate nohighlight">\(\alpha\)</span>-stable distributions.</p>
<p>A Langevin equation is a stochastic differential equation describing how a system evolves when subjected to a combination of deterministic and stochastic forces. The main idea of using the Langevin equation is its application to simulate Brownian motion, which is a well-known Lévy process. More specifically, the Langevin equation in Ecosampling simulates a Lévy flight, in which the step lengths have a Lévy distribution. A visual system producing Lévy flights implements a more efficient strategy
of shifting gaze in a random visual environment than any strategy employing a typical scale in gaze shift magnitudes. Indeed, the heavy-tailed distributions of gaze shift amplitudes are close to those characterizing the foraging behavior of many animal species.</p>
<p>The GazeSampler class starts by getting the possible attractors for the FoA. It can compute one or multiple gaze attractors. If a landscape of proto-objects is given, then their centers are used; otherwise, attractors are determined through the IPs sampled from saliency. The attractors are the deterministic aspect of the Langevin-like SDE, and the final FoA is determined by stepping the differential equation. If the Langevin fails to return a valid FoA, the system can resort to a perturbed
argmax solution or even keep the previous one.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">print_configurations</span><span class="p">(</span><span class="n">GazeConfig</span><span class="p">,</span> <span class="s2">&quot;Gaze&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Gaze Configurations:
        FIRST_FOA_ON_CENTER: True
        SIMPLE_ATTRACTOR: False
        NMAX: 10
        NUM_INTERNALSIM: 100
        MAX_NUMATTEMPTS: 5
        ALPHA_STABLE: [2.0, 1.6, 1.4]
        GAMMA_STABLE: [3.78, 22, 60]
        BETA_STABLE: [1, 1, 1]
        DELTA_STABLE: [9, 60, 250]
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[37]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pred_foa</span> <span class="o">=</span> <span class="n">center_foa</span>
<span class="n">dir_old</span> <span class="o">=</span> <span class="n">start_dir</span>
<span class="n">gaze_sampler</span> <span class="o">=</span> <span class="n">GazeSampler</span><span class="p">(</span><span class="n">frame_sampling</span><span class="p">,</span> <span class="n">proto_params</span><span class="p">,</span>
                           <span class="n">ip_sampler</span><span class="p">,</span> <span class="n">hist_mat</span><span class="p">,</span> <span class="n">num_proto</span><span class="p">)</span>

<span class="n">final_foa</span><span class="p">,</span> <span class="n">dir_new</span> <span class="o">=</span> <span class="n">gaze_sampler</span><span class="o">.</span><span class="n">sample_gaze_shift</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="n">pred_foa</span><span class="p">,</span> <span class="n">dir_old</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Final FOA: </span><span class="si">{</span><span class="n">final_foa</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;New Dir: </span><span class="si">{</span><span class="n">dir_new</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>


<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">plotter</span><span class="o">.</span><span class="n">plot_sampled_FOA</span><span class="p">(</span><span class="n">axs</span><span class="p">,</span> <span class="n">frame_sampling</span><span class="p">,</span> <span class="n">gaze_sampler</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Final FOA: [262. 245.]
New Dir: (1, 100)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/user_api_usage_39_1.png" src="../_images/user_api_usage_39_1.png" />
</div>
</div>
<section id="IPs-complete-visualization">
<h4>IPs complete visualization<a class="headerlink" href="#IPs-complete-visualization" title="Permalink to this headline"></a></h4>
<p>It is worth noting that the IPs are the red dots in the picture while the yellow and green dots represents both all candidates and the maximum focus of attention.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Complete IPs</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">plotter</span><span class="o">.</span><span class="n">plot_interest_points</span><span class="p">(</span><span class="n">axs</span><span class="p">,</span> <span class="n">frame_sampling</span><span class="p">,</span> <span class="n">sampled_points_coord</span><span class="p">,</span> <span class="n">gaze_sampler</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/user_api_usage_41_0.png" src="../_images/user_api_usage_41_0.png" />
</div>
</div>
</section>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="introduction.html" class="btn btn-neutral float-left" title="Ecological Sampling Python" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="config.html" class="btn btn-neutral float-right" title="Configuration file" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Giuseppe Boccignone, Renato Nobre.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>